## 1. 요구사항 확인
회원 목록 조회 API
- 시스템에 등록된 회원 목록을 조회할 수 있어야 합니다.
- 단, 관리자만 조회 가능합니다.
## 2. register 변경
- role 부분이 추가된다.

```
// src/dto/register.dto.ts
import { IsEmail, IsNotEmpty, IsString, MinLength } from 'class-validator';
import { UserRole } from 'src/entities/user.entity';
import { Transform } from 'class-transformer';

export class RegisterDto {
  @IsEmail()
  @IsNotEmpty()
  username: string;

  @IsString()
  @IsNotEmpty()
  password: string;

  @IsString()
  @Transform(({ value }) => value || UserRole.MEMBER)
  role: UserRole = UserRole.MEMBER;
}

```

## 3. 가입시 admin 권한 받을 수 있는 지 확인

`요청.json`

```
{
    "username" : "admin@gmail.com",
    "password" : "1234",
    "role" : "ADMIN"
}
```

- db 확인
```
mysql> SELECT * FROM opstest.user;
+----+--------------------------------------------------------------+--------+-----------------+
| id | password                                                     | role   | username        |
+----+--------------------------------------------------------------+--------+-----------------+
| 10 | $2b$10$rIAYknSyZc8WO5zGlQTyFOM66t2yTw2w6OEALPeM9Gxrt7C86p2Lq | MEMBER | test@gmail.com  |
| 11 | $2b$10$5L7o0ZDNc2ABM8WHvERa9OLHEIuohNK/bSe2ft2.LLRqbW//25i3K | MEMBER | test2@gmail.com |
| 12 | $2b$10$8gVzz88iAe.88b4A0VgaQe1OeMMpLa3lQL/LNGaXzjfAERs/T6nMq | ADMIN  | admin@gmail.com |
+----+--------------------------------------------------------------+--------+-----------------+
3 rows in set (0.00 sec)
```

- ADMIN으로 가입 가능하다.

## payload에 role 추가

```
const payload = { username: user.username, sub: user.id, role: user.role };
```


## 요구사항 충족 확인

- 관리자가 아닌 일반 member가 요청을 보냈을 때
```
{
    "message": "관리자만 접근 가능합니다.",
    "error": "Unauthorized",
    "statusCode": 401
}
```

- 관리자가 요청을 보냈을 때
```
[
    {
        "id": 10,
        "username": "test@gmail.com",
        "password": "$2b$10$rIAYknSyZc8WO5zGlQTyFOM66t2yTw2w6OEALPeM9Gxrt7C86p2Lq",
        "role": "MEMBER"
    },
    {
        "id": 11,
        "username": "test2@gmail.com",
        "password": "$2b$10$5L7o0ZDNc2ABM8WHvERa9OLHEIuohNK/bSe2ft2.LLRqbW//25i3K",
        "role": "MEMBER"
    },
    {
        "id": 12,
        "username": "admin@gmail.com",
        "password": "$2b$10$8gVzz88iAe.88b4A0VgaQe1OeMMpLa3lQL/LNGaXzjfAERs/T6nMq",
        "role": "ADMIN"
    }
]
```


- 시스템에 등록된 회원 목록을 조회할 수 있어야 합니다. ✅
- 단, 관리자만 조회 가능합니다. ✅