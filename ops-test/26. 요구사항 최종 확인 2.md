## 1. 회원가입시 이메일 인증 기능을 추가하세요. ✅
![[Pasted image 20240127183051.png]]

## 2. Refresh 토큰을 사용하여 토큰 재발급 기능을 추가하세요. ✖️✅

![[Pasted image 20240127183136.png]]


- refresh 토큰이 어떤 것이 들어오든 access_token이 들어오는 것은 적절하지 않다.
- 따라서 refresh 토큰이 들어왔을 때 이것이 db에 있는 토큰에 있는지 탐색하고, 없다면 실패를 반환하는게 맞을 것이다.
- 다음 로직을 추가하고 다시 요구사항 검증을 하자

```
// refreshToken으로 사용자 검색
const userForFindRefreshToken = await this.usersService.findByRefreshToken(refreshToken);
if (!userForFindRefreshToken) {
	throw new UnauthorizedException('Refresh token does not exist');
}
```

- 다음과 같이 refresh 토큰이 db에 존재하지 않으면 잘못된 요청으로 오류 메시지를 준다
```
{
    "message": "Refresh token is invalid",
    "error": "Unauthorized",
    "statusCode": 401
}
```


## 3. 로그인 시도 제한 기능(최대 5회)을 추가하세요. ✅

![[Pasted image 20240127184652.png]]
다음과 같이 로그인 5회 잘못 입력하면 로그인 시도 횟수 초과 에러가 발생한다.




## 4. 중복 로그인 방지 기능을 추가하세요. ✅
- 기존 로그인 토큰 복사
- 새로 로그인
- 기능 상실
![[Pasted image 20240127184853.png]]

## 5. 요구사항 끝! 😊